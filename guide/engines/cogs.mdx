---
title: "Cogs"
description: "The building blocks of an Engine's workflow"
---

As you may have seen in the previous chapter about workflows, cogs are the individual instructions that make up an
Engine's workflow. There is no secret: each cog represents a specific action, and they are executed in the order they
are arranged in the workflow.

There are a couple of different types of cogs, and we will keep releasing new ones in the future.

In this chapter, we will go throuhg different types of cogs available in Cogfy Messenger and how to configure them.

## Send Message cog

The Send Message cog is used to send a predefined message to the user.

Because messages can be reused in multiple places and some of them can be quite complex (for example, Whatsapp Flows),
we decided to move the creation of messages to a separate section called "Messages", as you can find in the sidebar.

After having at least one message created, you configure a Send Message cog to reference one of those messages in the
cog's dropdown, as shown below.

<img src="images/cogs/send-message.png" alt="The send message cog." style={{ borderRadius: '0.5rem' }} />

## Run Assistant cog

The Run Assistant cog is used to run a Engine Assistant to generate a reply, considering the current conversation
context.

<img src="images/cogs/run-assistant.png" alt="The run assistant cog." style={{ borderRadius: '0.5rem' }} />

<Info>
Not to be confused with with the old Cogfy Assistants: Engine Assistants are a new concept of assistants that are scoped
by Engine and meant to be used by Engines only.
</Info>

Because of the complexity and reusability of configuring an Engine Assistant, we also moved their creation to a separate
section called "Assistants", which is covered in the Assistants chapter of this guide.

## Router cog

The Router cog is used to route the workflow execution to different paths based on certain conditions.

<img src="images/cogs/router.png" alt="The router cog." style={{ borderRadius: '0.5rem' }} />

Conditions can be configured by clicking on the pencil icon on the right of each path cog, which will prompt a modal
where you can intuitively set up conditions, as follows:

<img src="images/cogs/edit-router-path-modal.png" alt="The router cog conditions modal." style={{ borderRadius: '0.5rem' }} />

As long as there aren't any typos, this path will only be matched if the first name is equal to King and the second name
is equal to Witcher.

<Info>
After executing every matching path, the workflow execution will continue after the router cog.
</Info>

<Warning>
Currently, if more than one path's conditions are met, every matching path will be executed in the order they are defined in the
router cog. In the future, this behavior will be optional.
</Warning>

## LLM Router cog

Rather then relying on predefined conditions, the LLM Router cog is used to route the workflow execution to different
paths based on the output of a Large Language Model (LLM), such as GPT, consdiering the current conversation context and
any custom prompt you may want to provide.

<img src="images/cogs/llm-router.png" alt="The LLM router cog." style={{ borderRadius: '0.5rem' }} />

### LLM Router

The LLM Router cog on top allows you to define the model, some optional instructions to guide the model's behavior and a
default behavior in case none of the paths are matched by the LLM, as shown below:

<img src="images/cogs/edit-llm-router.png" alt="Edit LLM modal." style={{ borderRadius: '0.5rem' }} />

The default behavior field describes what to do if none of the paths are matched. You can choose between the following
options:

- **Use first route**: Route to the first path defined in the LLM Router cog.
- **Use last route**: Route to the last path defined in the LLM Router cog.
- **Throw error**: Throw an error and stop the workflow execution.
- **Stop**: Stop the workflow execution. Further cogs will not be executed.
- **Run next cog**: Continue the workflow execution with the next cog after the LLM Router cog.
- **Send default message**: Send a predefined message of your choice to the user.

### LLM Router path

Each LLM Router path cog allows you to define the name of the path and a prompt that will be used to determine which
path to take. Both the name and the prompt will be used by the LLM.

<img src="images/cogs/edit-llm-router-path.png" alt="Edit LLM Router path modal." style={{ borderRadius: '0.5rem' }} />

<Tip>
Keep the route names short and simple, as they will be provided to the LLM as options to choose from. Excessive
complexty may lead to LLM confusion and unexpected behavior.
</Tip>
